{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/David/Desktop/projekat_pia/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport { ElementRef } from '@angular/core';\nimport { Pravougaonik } from '../model/rectaingle';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\n\nfunction ClientComponent_tr_38_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r6 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"td\")(10, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ClientComponent_tr_38_Template_button_click_10_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const obj_r4 = restoredCtx.$implicit;\n      const ctx_r5 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r5.showCanvas(obj_r4.canvas));\n    });\n    i0.ɵɵtext(11, \"Prikazi\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(12, \"td\")(13, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ClientComponent_tr_38_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const obj_r4 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.editCanvas(obj_r4.adresa));\n    });\n    i0.ɵɵtext(14, \"Izmeni objekat\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"td\")(16, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ClientComponent_tr_38_Template_button_click_16_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r6);\n      const obj_r4 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.deleteCanvas(obj_r4.tip, obj_r4.adresa));\n    });\n    i0.ɵɵtext(17, \"Obrisi\");\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const obj_r4 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(obj_r4.tip);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(obj_r4.adresa);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(obj_r4.prostorije);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(obj_r4.kvadratura);\n  }\n}\n\nfunction ClientComponent_tr_141_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵelement(2, \"img\", 0);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"td\")(8, \"input\", 30);\n    i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_tr_141_Template_input_ngModelChange_8_listener($event) {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.agencijaZahtev = $event);\n    });\n    i0.ɵɵelementEnd()()();\n  }\n\n  if (rf & 2) {\n    const n_r9 = ctx.$implicit;\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"src\", n_r9.image, i0.ɵɵsanitizeUrl);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(n_r9.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(n_r9.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"value\", n_r9.name);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.agencijaZahtev);\n  }\n}\n\nfunction ClientComponent_option_150_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 31);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const obj_r12 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", obj_r12.adresa);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(obj_r12.adresa);\n  }\n}\n\nfunction ClientComponent_tr_191_td_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const n_r13 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(n_r13.ponuda);\n  }\n}\n\nfunction ClientComponent_tr_191_td_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\")(1, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ClientComponent_tr_191_td_8_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const n_r13 = i0.ɵɵnextContext().$implicit;\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.prihvatiPonudu(n_r13.agencija, n_r13.adresa));\n    });\n    i0.ɵɵtext(2, \"Prihvati\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ClientComponent_tr_191_td_9_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\")(1, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ClientComponent_tr_191_td_9_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const n_r13 = i0.ɵɵnextContext().$implicit;\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.odbijPonudu(n_r13.agencija, n_r13.adresa));\n    });\n    i0.ɵɵtext(2, \"Odbij\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction ClientComponent_tr_191_td_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r27 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"td\")(1, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ClientComponent_tr_191_td_10_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r27);\n      const n_r13 = i0.ɵɵnextContext().$implicit;\n      const ctx_r25 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r25.plati(n_r13.agencija, n_r13.adresa));\n    });\n    i0.ɵɵtext(2, \"Plati\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nconst _c0 = function (a0, a1) {\n  return {\n    \"green-row\": a0,\n    \"red-row\": a1\n  };\n};\n\nfunction ClientComponent_tr_191_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 32)(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"td\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"td\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(7, ClientComponent_tr_191_td_7_Template, 2, 1, \"td\", 33);\n    i0.ɵɵtemplate(8, ClientComponent_tr_191_td_8_Template, 3, 0, \"td\", 33);\n    i0.ɵɵtemplate(9, ClientComponent_tr_191_td_9_Template, 3, 0, \"td\", 33);\n    i0.ɵɵtemplate(10, ClientComponent_tr_191_td_10_Template, 3, 0, \"td\", 33);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const n_r13 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(8, _c0, n_r13.status === \"prihvacenZahtev\", n_r13.status === \"odbijenZahtev\"));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(n_r13.agencija);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(n_r13.adresa);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(n_r13.rok);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", n_r13.ponuda > 0 && n_r13.status == \"prihvacenZahtev\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", n_r13.ponuda > 0 && n_r13.status == \"prihvacenZahtev\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", n_r13.ponuda > 0 && n_r13.status == \"prihvacenZahtev\");\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", n_r13.ponuda > 0 && n_r13.status == \"aktivan\" && ctx_r3.isJobFinished(n_r13.adresa));\n  }\n}\n\nexport class ClientComponent {\n  constructor(userService, router, elementRef) {\n    this.userService = userService;\n    this.router = router;\n    this.elementRef = elementRef;\n    this.kvadrati = [];\n    this.selectedRect = null;\n    this.current_shape_index = null;\n    this.is_dragging = false;\n    this.drawingDoors = false; // da li crtamo vrata\n\n    this.doors = [];\n    this.selectedDoor = null;\n    this.current_door_index = null;\n    this.allObjects = []; // Agencije : pretrazivanje i prikazivanje\n\n    this.allAgencies = []; // POSLOVI\n\n    this.sviPoslovi = [];\n  }\n\n  ngOnInit() {\n    this.username = sessionStorage.getItem('username');\n    this.password = sessionStorage.getItem('password');\n    this.findImage();\n    this.canvas = document.querySelector('#canvas1');\n    this.ctx = this.canvas.getContext('2d');\n    this.canvas.width = 300;\n    this.canvas.height = 300;\n    this.canvas2 = this.elementRef.nativeElement.querySelector('#canvas2');\n    this.ctx2 = this.canvas2.getContext('2d');\n    this.canvas2.width = 300;\n    this.canvas2.height = 300;\n    this.canvas.addEventListener(\"click\", event => {\n      let x = event.offsetX;\n      let y = event.offsetY;\n\n      if (this.drawingDoors) {\n        // crtamo vrata\n        const novaVrata = new Pravougaonik(x, y, 20, 20);\n        const preklapaSe = this.doors.some(door => door.intersects(novaVrata));\n\n        if (!preklapaSe) {\n          if (novaVrata.x + novaVrata.width < this.canvas.width && novaVrata.y + novaVrata.height < this.canvas.height) {\n            this.doors.push(novaVrata);\n            draw_shapes.bind(this)();\n          }\n        }\n      } else {\n        // crtamo sobu\n        const noviKvadrat = new Pravougaonik(x, y, this.rectWidth, this.rectHeight);\n        const preklapaSe = this.kvadrati.some(kvadrat => kvadrat.intersects(noviKvadrat)); //ako se bar sa jednim preklapa, vratice true\n\n        if (!preklapaSe) {\n          if (noviKvadrat.x + noviKvadrat.width < this.canvas.width && noviKvadrat.y + noviKvadrat.height < this.canvas.height) {\n            this.kvadrati.push(noviKvadrat);\n            draw_shapes.bind(this)();\n          }\n        }\n      }\n    });\n\n    let is_mouse_in_shape = (x, y, kvadrat) => {\n      let shape_left = kvadrat.x;\n      let shape_right = kvadrat.x + kvadrat.width;\n      let shape_top = kvadrat.y;\n      let shape_bottom = kvadrat.y + kvadrat.height;\n\n      if (x > shape_left && x < shape_right && y > shape_top && y < shape_bottom) {\n        return true;\n      }\n\n      return false;\n    };\n\n    let mouse_down = event => {\n      event.preventDefault(); //this.startX = parseInt(event.offsetX);\n      //this.startY = parseInt(event.offsetY);\n\n      let index = 0;\n\n      if (!this.drawingDoors) {\n        // pomeramo sobu\n        this.startX = parseInt(event.offsetX);\n        this.startY = parseInt(event.offsetY);\n\n        for (let kvadrat of this.kvadrati) {\n          if (is_mouse_in_shape(this.startX, this.startY, kvadrat)) {\n            this.current_shape_index = index;\n            this.is_dragging = true;\n            return;\n          }\n\n          index++;\n        }\n      } else {\n        // pomeramo vrata\n        this.startDoorX = parseInt(event.offsetX);\n        this.startDoorY = parseInt(event.offsetY);\n\n        for (let vrata of this.doors) {\n          if (is_mouse_in_shape(this.startDoorX, this.startDoorY, vrata)) {\n            this.current_door_index = index;\n            this.is_dragging = true;\n            return;\n          }\n\n          index++;\n        }\n      }\n    };\n\n    let mouse_up = event => {\n      if (!this.is_dragging) {\n        return;\n      }\n\n      event.preventDefault();\n      this.is_dragging = false;\n    };\n\n    let mouse_out = event => {\n      if (!this.is_dragging) {\n        return;\n      }\n\n      event.preventDefault();\n      this.is_dragging = false;\n    };\n\n    let mouse_move = event => {\n      if (!this.is_dragging) {\n        return;\n      } else {\n        event.preventDefault();\n        let mouseX = parseInt(event.offsetX);\n        let mouseY = parseInt(event.offsetY);\n        let dx;\n        let dy;\n        let current_shape = this.kvadrati[this.current_shape_index];\n        let current_door = this.doors[this.current_door_index];\n\n        if (!this.drawingDoors) {\n          dx = mouseX - this.startX;\n          dy = mouseY - this.startY; // Provera preklapanja sa drugim kvadratima\n\n          let preklapaSe = this.kvadrati.some((kvadrat, index) => {\n            if (index !== this.current_shape_index) {\n              return kvadrat.intersects(new Pravougaonik(current_shape.x + dx, current_shape.y + dy, current_shape.width, current_shape.height));\n            }\n\n            return false;\n          });\n\n          if (!preklapaSe) {\n            if (current_shape.x + dx + current_shape.width < this.canvas.width && current_shape.x + dx > 0) {\n              current_shape.x += dx;\n            }\n\n            if (current_shape.y + dy + current_shape.height < this.canvas.height && current_shape.y + dy > 0) {\n              current_shape.y += dy;\n            }\n          }\n\n          draw_shapes();\n          this.startX = mouseX;\n          this.startY = mouseY;\n        } else {\n          dx = mouseX - this.startDoorX;\n          dy = mouseY - this.startDoorY;\n\n          if (current_door.x + dx + current_door.width < this.canvas.width && current_door.x + dx > 0) {\n            current_door.x += dx;\n          }\n\n          if (current_door.y + dy + current_door.height < this.canvas.height && current_door.y + dy > 0) {\n            current_door.y += dy;\n          }\n\n          draw_shapes();\n          this.startDoorX = mouseX;\n          this.startDoorY = mouseY;\n        }\n      }\n    };\n\n    this.canvas.onmousedown = mouse_down;\n    this.canvas.onmouseup = mouse_up;\n    this.canvas.onmouseout = mouse_out;\n    this.canvas.onmousemove = mouse_move;\n\n    let draw_shapes = function () {\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n      for (let kvadrat of this.kvadrati) {\n        this.ctx.beginPath();\n        this.ctx.rect(kvadrat.x, kvadrat.y, kvadrat.width, kvadrat.height);\n        this.ctx.stroke();\n      }\n\n      for (let door of this.doors) {\n        this.ctx.fillStyle = 'brown';\n        this.ctx.fillRect(door.x, door.y, door.width, door.height);\n      }\n    }.bind(this);\n\n    draw_shapes();\n    this.userService.getAllObjects(this.username).subscribe(data => {\n      this.allObjects = data;\n    });\n    this.userService.getAllAgencies().subscribe(data => {\n      this.allAgencies = data;\n    });\n    this.userService.getAllUserJobs(this.username).subscribe(data => {\n      this.sviPoslovi = data;\n    });\n  }\n\n  findImage() {\n    this.userService.findClient(this.username, this.password).subscribe(client => {\n      if (client) {\n        this.image = client.image;\n        this.firstname = client.firstname;\n        this.lastname = client.lastname;\n        this.contact = client.contact;\n        this.mail = client.mail;\n      } else {\n        console.log(\"neuspeh\");\n      }\n    });\n  } // Dodavanje objekta\n\n\n  addObject() {\n    const kanvas = {\n      brSoba: this.kvadrati.length,\n      brVrata: this.doors.length,\n      koordinateSoba: this.kvadrati.map(kvadrat => ({\n        x: kvadrat.x,\n        y: kvadrat.y,\n        width: kvadrat.width,\n        height: kvadrat.height,\n        color: null\n      })),\n      koordinateVrata: this.doors.map(door => ({\n        x: door.x,\n        y: door.y,\n        width: door.width,\n        height: door.height\n      }))\n    };\n    this.userService.addObject(this.username, this.tipObj, this.adresaObj, this.prostorijeObj, this.kvadratura, kanvas).subscribe(resp => {\n      if (resp) {\n        alert(resp['message']);\n      } else {\n        alert(\"Objekat nije dodat.\");\n      }\n    });\n    this.ngOnInit();\n  } // dodavanje objekta preko JSON fajla\n\n\n  onFileSelected(event) {\n    const file = event.target.files[0];\n    const reader = new FileReader();\n\n    reader.onload = e => {\n      const contents = e.target.result;\n      const json = JSON.parse(contents); //console.log(json);\n      // Dodajemo JSON u bazu\n\n      this.userService.addObject(this.username, json.tip, json.adresa, json.prostorije, json.kvadratura, json.canvas).subscribe(resp => {\n        if (resp) {\n          alert(resp['message']);\n        } else {\n          alert(\"Objekat nije dodat.\");\n        }\n      });\n    };\n\n    reader.readAsText(file);\n    this.ngOnInit();\n  } // za prikazivanje na canvasu 2\n\n\n  showCanvas(canvas) {\n    this.ctx2.clearRect(0, 0, this.canvas2.width, this.canvas2.height);\n\n    for (let i = 0; i < canvas.brSoba; i++) {\n      if (canvas.koordinateSoba[i].color == \"red\") {\n        this.ctx2.fillStyle = 'red';\n        this.ctx2.fillRect(canvas.koordinateSoba[i].x, canvas.koordinateSoba[i].y, canvas.koordinateSoba[i].width, canvas.koordinateSoba[i].height);\n        this.ctx2.strokeRect(canvas.koordinateSoba[i].x, canvas.koordinateSoba[i].y, canvas.koordinateSoba[i].width, canvas.koordinateSoba[i].height);\n      } else if (canvas.koordinateSoba[i].color == \"green\") {\n        this.ctx2.fillStyle = 'green';\n        this.ctx2.fillRect(canvas.koordinateSoba[i].x, canvas.koordinateSoba[i].y, canvas.koordinateSoba[i].width, canvas.koordinateSoba[i].height);\n        this.ctx2.strokeRect(canvas.koordinateSoba[i].x, canvas.koordinateSoba[i].y, canvas.koordinateSoba[i].width, canvas.koordinateSoba[i].height);\n      } else {\n        this.ctx2.beginPath();\n        this.ctx2.rect(canvas.koordinateSoba[i].x, canvas.koordinateSoba[i].y, canvas.koordinateSoba[i].width, canvas.koordinateSoba[i].height);\n        this.ctx2.stroke();\n      }\n    }\n\n    for (let i = 0; i < canvas.brVrata; i++) {\n      this.ctx2.fillStyle = 'brown';\n      this.ctx2.fillRect(canvas.koordinateVrata[i].x, canvas.koordinateVrata[i].y, canvas.koordinateVrata[i].width, canvas.koordinateVrata[i].height);\n    }\n  }\n\n  editCanvas(adresa) {\n    sessionStorage.setItem(\"userObj\", this.username);\n    sessionStorage.setItem(\"adresaObj\", adresa);\n    this.router.navigate(['edit-obj']);\n  }\n\n  deleteCanvas(tip, adresa) {\n    this.userService.deleteObject(tip, adresa).subscribe(resp => {\n      if (resp) {} else {\n        alert(\"Objekat nije obrisan.\");\n      }\n    });\n    this.ngOnInit();\n  } // Promena lozinke\n\n\n  changePassword() {\n    if (this.isDisabled() == true) {\n      this.message = \"Morate uneti sva polja.\";\n      return;\n    }\n\n    if (this.isPasswordValid() == false) return;\n\n    if (this.oldPassword != this.password) {\n      this.message = \"Stara lozinka nije ispravna.\";\n      return;\n    }\n\n    if (this.newPassword != this.repeatPassword) {\n      this.message = \"Ponovljena lozinka mora biti ista kao nova.\";\n      return;\n    }\n\n    this.userService.changePassword(this.username, this.newPassword).subscribe(resp => {\n      if (resp) {\n        alert(resp['message']);\n      } else {\n        this.message = \"Promena lozinke neuspesna.\";\n      }\n    });\n  }\n\n  isDisabled() {\n    if (this.oldPassword && this.newPassword && this.repeatPassword) return false;else return true;\n  }\n\n  isPasswordValid() {\n    if (this.newPassword.length < 7 || this.newPassword.length > 12) {\n      this.message = \"Lozinka mora da sadrzi najmanje 7, a najvise 12 karaktera.\";\n      return false;\n    }\n\n    const firstCaracter = this.newPassword.charAt(0);\n\n    if (!/[a-zA-Z]/.test(firstCaracter)) {\n      this.message = \"Prvi karakter lozinke mora biti slovo.\";\n      return false;\n    }\n\n    if (!/[A-Z]/.test(this.newPassword) || !/[0-9]/.test(this.newPassword) || !/[^a-zA-Z0-9]/.test(this.newPassword)) {\n      this.message = \"Lozinka mora sadrzati bar jedno veliko slovo, jedan broj i jedan specijalni karakter.\";\n      return false;\n    }\n\n    return true; //proslo je sve uslove\n  }\n\n  searchAgency() {\n    if (this.searchName && !this.searchAddress) {\n      this.userService.searchAgenciesName(this.searchName).subscribe(data => {\n        this.allAgencies = data;\n      });\n    } else if (!this.searchName && this.searchAddress) {\n      this.userService.searchAgenciesAddress(this.searchAddress).subscribe(data => {\n        this.allAgencies = data;\n      });\n    } else if (this.searchName && this.searchAddress) {\n      this.userService.searchAgencies(this.searchName, this.searchAddress).subscribe(data => {\n        this.allAgencies = data;\n      });\n    } else {\n      this.ngOnInit();\n    }\n  }\n\n  sortirajAgencije() {\n    this.allAgencies.sort((ag1, ag2) => {\n      const valueA = this.getPropertyValue(ag1, this.sortParam);\n      const valueB = this.getPropertyValue(ag2, this.sortParam);\n\n      if (valueA < valueB) {\n        return -1 * this.sortTrend; // Promenjeno u negativan broj za opadajući redosled\n      } else if (valueA > valueB) {\n        return 1 * this.sortTrend;\n      } else {\n        return 0;\n      }\n    });\n  }\n\n  getPropertyValue(obj, prop) {\n    return obj[prop.toLowerCase()];\n  }\n\n  podnesiZahtev() {\n    this.userService.addZahtev(this.username, this.agencijaZahtev, this.adresaZahtev, this.rokZahtev, \"neobradjenZahtev\").subscribe(resp => {\n      if (resp) {\n        alert(resp['message']);\n      } else {\n        alert(\"Zahtev nije dodat.\");\n      }\n    });\n    this.ngOnInit();\n  }\n\n  prihvatiPonudu(agencija, adresa) {\n    this.userService.prihvatiPonudu(this.username, agencija, adresa).subscribe(resp => {\n      if (resp) {} else {\n        this.message = \"Neuspeh!\";\n      }\n    });\n    this.ngOnInit();\n  }\n\n  odbijPonudu(agencija, adresa) {\n    this.userService.odbijPonudu(this.username, agencija, adresa).subscribe(resp => {\n      if (resp) {} else {\n        this.message = \"Neuspeh!\";\n      }\n    });\n    this.ngOnInit();\n  }\n\n  plati(agencija, adresa) {\n    console.log(\"plati\");\n    this.userService.plati(this.username, agencija, adresa).subscribe(resp => {\n      if (resp) {} else {\n        this.message = \"Neuspeh!\";\n      }\n    });\n    this.ngOnInit();\n  }\n\n  isJobFinished(adresa) {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const response = yield _this.userService.isJobFinished(_this.username, adresa).toPromise();\n\n      if (response['message'] === 'Gotovo') {\n        console.log('gotovo');\n        return true;\n      } else if (response['message'] === 'NijeGotovo') {\n        return false;\n      } else {\n        console.log('Nije doslo dovde');\n        return false;\n      }\n    })();\n  }\n\n  filtrirajPoslove() {\n    if (this.filterPosao == \"aktivan\" || this.filterPosao == \"zavrsen\" || this.filterPosao == \"zahtev\") {\n      this.userService.filterJobs(this.username, this.filterPosao).subscribe(data => {\n        this.sviPoslovi = data;\n        console.log(this.sviPoslovi);\n      });\n    } else if (this.filterPosao == \"svi\") {\n      this.userService.getAllUserJobs(this.username).subscribe(data => {\n        this.sviPoslovi = data;\n      });\n    } else {\n      alert(\"GRESKA filter\");\n    }\n  }\n\n}\n\nClientComponent.ɵfac = function ClientComponent_Factory(t) {\n  return new (t || ClientComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i0.ElementRef));\n};\n\nClientComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ClientComponent,\n  selectors: [[\"app-client\"]],\n  decls: 217,\n  vars: 27,\n  consts: [[\"alt\", \"Uploaded Image\", 1, \"thumbnail\", 3, \"src\"], [\"border\", \"1\"], [4, \"ngFor\", \"ngForOf\"], [\"id\", \"canvas2\", 1, \"canvasClass\"], [3, \"ngModel\", \"ngModelChange\"], [\"value\", \"stan\"], [\"value\", \"kuca\"], [\"type\", \"text\", \"name\", \"text\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"name\", \"numer\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"name\", \"number\", 3, \"ngModel\", \"ngModelChange\"], [2, \"margin-bottom\", \"0\"], [2, \"font-style\", \"italic\", \"color\", \"red\", \"margin-top\", \"0\"], [\"colspan\", \"4\"], [\"type\", \"checkbox\", \"name\", \"checkbox\", \"id\", \"door\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"door\"], [\"id\", \"canvas1\", 1, \"canvasClass\"], [3, \"click\"], [\"type\", \"file\", \"accept\", \".json\", 3, \"change\"], [\"value\", \"name\"], [\"value\", \"description\"], [\"value\", \"1\"], [\"value\", \"-1\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"value\", \"aktivan\"], [\"value\", \"zavrsen\"], [\"value\", \"zahtev\"], [\"value\", \"svi\"], [3, \"ngClass\", 4, \"ngFor\", \"ngForOf\"], [\"colspan\", \"2\"], [2, \"color\", \"red\"], [\"type\", \"radio\", \"name\", \"radiogroup\", 3, \"value\", \"ngModel\", \"ngModelChange\"], [3, \"value\"], [3, \"ngClass\"], [4, \"ngIf\"]],\n  template: function ClientComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h3\");\n      i0.ɵɵtext(1, \"Profil\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"table\")(3, \"tr\")(4, \"td\");\n      i0.ɵɵelement(5, \"img\", 0);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"td\")(7, \"h4\");\n      i0.ɵɵtext(8);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(9, \"tr\")(10, \"td\");\n      i0.ɵɵtext(11, \"mail: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"td\");\n      i0.ɵɵtext(13);\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(14, \"tr\")(15, \"td\");\n      i0.ɵɵtext(16, \"contact: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"td\");\n      i0.ɵɵtext(18);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(19, \"hr\");\n      i0.ɵɵelementStart(20, \"h3\");\n      i0.ɵɵtext(21, \"Svi objekti\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"table\", 1)(23, \"tr\")(24, \"td\");\n      i0.ɵɵtext(25, \"Tip\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"td\");\n      i0.ɵɵtext(27, \"Adresa\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"td\");\n      i0.ɵɵtext(29, \"Br. prostorija\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(30, \"td\");\n      i0.ɵɵtext(31, \"Kvadratura\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"td\");\n      i0.ɵɵtext(33, \"Skica\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(34, \"td\");\n      i0.ɵɵtext(35, \"Izmeni\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(36, \"td\");\n      i0.ɵɵtext(37, \"Obrisi\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(38, ClientComponent_tr_38_Template, 18, 4, \"tr\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(39, \"br\")(40, \"canvas\", 3);\n      i0.ɵɵelementStart(41, \"h4\");\n      i0.ɵɵtext(42, \"Dodaj objekat:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"table\")(44, \"tr\")(45, \"td\");\n      i0.ɵɵtext(46, \"Tip objekta\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"td\")(48, \"select\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_select_ngModelChange_48_listener($event) {\n        return ctx.tipObj = $event;\n      });\n      i0.ɵɵelementStart(49, \"option\", 5);\n      i0.ɵɵtext(50, \"Stan\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(51, \"option\", 6);\n      i0.ɵɵtext(52, \"Kuca\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(53, \"tr\")(54, \"td\");\n      i0.ɵɵtext(55, \"Adresa\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(56, \"td\")(57, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_57_listener($event) {\n        return ctx.adresaObj = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(58, \"tr\")(59, \"td\");\n      i0.ɵɵtext(60, \"Broj prostorija\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(61, \"td\")(62, \"input\", 8);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_62_listener($event) {\n        return ctx.prostorijeObj = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(63, \"tr\")(64, \"td\");\n      i0.ɵɵtext(65, \"Kvadratura\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(66, \"td\")(67, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_67_listener($event) {\n        return ctx.kvadratura = $event;\n      });\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(68, \"p\", 10);\n      i0.ɵɵtext(69, \"Unesite dimenzije prostorije koju zelite da nacrtate, a zatim klikom na povrsinu ispod pozicionirajte istu.\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(70, \"p\", 11);\n      i0.ɵɵtext(71, \"(Napomena: Velicina platna je 300x300)\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(72, \"table\")(73, \"tr\")(74, \"td\");\n      i0.ɵɵtext(75, \"Sirina: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(76, \"td\")(77, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_77_listener($event) {\n        return ctx.rectWidth = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(78, \"td\");\n      i0.ɵɵtext(79, \"Visina: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(80, \"td\")(81, \"input\", 9);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_81_listener($event) {\n        return ctx.rectHeight = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(82, \"tr\")(83, \"td\", 12)(84, \"input\", 13);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_84_listener($event) {\n        return ctx.drawingDoors = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(85, \"label\", 14);\n      i0.ɵɵtext(86, \"Crtaj vrata\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelement(87, \"canvas\", 15)(88, \"br\");\n      i0.ɵɵelementStart(89, \"button\", 16);\n      i0.ɵɵlistener(\"click\", function ClientComponent_Template_button_click_89_listener() {\n        return ctx.addObject();\n      });\n      i0.ɵɵtext(90, \"Dodaj objekat\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(91, \"p\");\n      i0.ɵɵtext(92, \"Dodajte objekat preko JSON fajla:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(93, \"input\", 17);\n      i0.ɵɵlistener(\"change\", function ClientComponent_Template_input_change_93_listener($event) {\n        return ctx.onFileSelected($event);\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(94, \"hr\");\n      i0.ɵɵelementStart(95, \"h3\");\n      i0.ɵɵtext(96, \"Agencije\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(97, \" Pretrazi agencije: \");\n      i0.ɵɵelementStart(98, \"table\")(99, \"tr\")(100, \"td\");\n      i0.ɵɵtext(101, \"Naziv: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(102, \"td\")(103, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_103_listener($event) {\n        return ctx.searchName = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(104, \"td\");\n      i0.ɵɵtext(105, \"Adresa: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(106, \"td\")(107, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_107_listener($event) {\n        return ctx.searchAddress = $event;\n      });\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(108, \"td\")(109, \"button\", 16);\n      i0.ɵɵlistener(\"click\", function ClientComponent_Template_button_click_109_listener() {\n        return ctx.searchAgency();\n      });\n      i0.ɵɵtext(110, \"Pretrazi\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(111, \"table\")(112, \"tr\")(113, \"td\");\n      i0.ɵɵtext(114, \"Sortiraj po: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(115, \"td\")(116, \"select\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_select_ngModelChange_116_listener($event) {\n        return ctx.sortParam = $event;\n      });\n      i0.ɵɵelementStart(117, \"option\", 18);\n      i0.ɵɵtext(118, \"Nazivu\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(119, \"option\", 19);\n      i0.ɵɵtext(120, \"Opisu\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(121, \"td\")(122, \"select\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_select_ngModelChange_122_listener($event) {\n        return ctx.sortTrend = $event;\n      });\n      i0.ɵɵelementStart(123, \"option\", 20);\n      i0.ɵɵtext(124, \"Rastuce\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(125, \"option\", 21);\n      i0.ɵɵtext(126, \"Opadajuce\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(127, \"td\")(128, \"button\", 16);\n      i0.ɵɵlistener(\"click\", function ClientComponent_Template_button_click_128_listener() {\n        return ctx.sortirajAgencije();\n      });\n      i0.ɵɵtext(129, \"Sortiraj\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelement(130, \"br\");\n      i0.ɵɵelementStart(131, \"table\", 1)(132, \"tr\")(133, \"td\");\n      i0.ɵɵtext(134, \"Logo\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(135, \"td\");\n      i0.ɵɵtext(136, \"Naziv\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(137, \"td\");\n      i0.ɵɵtext(138, \"Opis\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(139, \"td\");\n      i0.ɵɵtext(140, \"Izaberi\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(141, ClientComponent_tr_141_Template, 9, 5, \"tr\", 2);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(142, \"h4\");\n      i0.ɵɵtext(143, \"Popuni zahtev za saradnju sa agencijom:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(144, \"table\")(145, \"tr\")(146, \"td\");\n      i0.ɵɵtext(147, \"Objekat na adresi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(148, \"td\")(149, \"select\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_select_ngModelChange_149_listener($event) {\n        return ctx.adresaZahtev = $event;\n      });\n      i0.ɵɵtemplate(150, ClientComponent_option_150_Template, 2, 2, \"option\", 22);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(151, \"tr\")(152, \"td\");\n      i0.ɵɵtext(153, \"Rok zavrsetka radova: \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(154, \"td\")(155, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_155_listener($event) {\n        return ctx.rokZahtev = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(156, \"tr\")(157, \"button\", 16);\n      i0.ɵɵlistener(\"click\", function ClientComponent_Template_button_click_157_listener() {\n        return ctx.podnesiZahtev();\n      });\n      i0.ɵɵtext(158, \"Podnesi zahtev\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelement(159, \"hr\");\n      i0.ɵɵelementStart(160, \"h3\");\n      i0.ɵɵtext(161, \"Poslovi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtext(162, \" Filtriraj: \");\n      i0.ɵɵelementStart(163, \"select\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_select_ngModelChange_163_listener($event) {\n        return ctx.filterPosao = $event;\n      });\n      i0.ɵɵelementStart(164, \"option\", 23);\n      i0.ɵɵtext(165, \"Aktivne poslove\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(166, \"option\", 24);\n      i0.ɵɵtext(167, \"Zavrsene poslove\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(168, \"option\", 25);\n      i0.ɵɵtext(169, \"Zahteve\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(170, \"option\", 26);\n      i0.ɵɵtext(171, \"Ponisti filter\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(172, \"button\", 16);\n      i0.ɵɵlistener(\"click\", function ClientComponent_Template_button_click_172_listener() {\n        return ctx.filtrirajPoslove();\n      });\n      i0.ɵɵtext(173, \"Potvrdi\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(174, \"br\");\n      i0.ɵɵelementStart(175, \"table\", 1)(176, \"tr\")(177, \"td\");\n      i0.ɵɵtext(178, \"Agencija\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(179, \"td\");\n      i0.ɵɵtext(180, \"Adresa\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(181, \"td\");\n      i0.ɵɵtext(182, \"Rok\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(183, \"td\");\n      i0.ɵɵtext(184, \"Ponuda\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(185, \"td\");\n      i0.ɵɵtext(186, \"Prihvati\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(187, \"td\");\n      i0.ɵɵtext(188, \"Odbij\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(189, \"td\");\n      i0.ɵɵtext(190, \"Plati\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(191, ClientComponent_tr_191_Template, 11, 11, \"tr\", 27);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(192, \"hr\");\n      i0.ɵɵelementStart(193, \"h3\");\n      i0.ɵɵtext(194, \"Promena lozinke\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(195, \"table\")(196, \"tr\")(197, \"td\");\n      i0.ɵɵtext(198, \"Stara lozinka\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(199, \"td\")(200, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_200_listener($event) {\n        return ctx.oldPassword = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(201, \"tr\")(202, \"td\");\n      i0.ɵɵtext(203, \"Nova lozinka\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(204, \"td\")(205, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_205_listener($event) {\n        return ctx.newPassword = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(206, \"tr\")(207, \"td\");\n      i0.ɵɵtext(208, \"Ponovite lozinku\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(209, \"td\")(210, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function ClientComponent_Template_input_ngModelChange_210_listener($event) {\n        return ctx.repeatPassword = $event;\n      });\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(211, \"tr\")(212, \"td\", 28)(213, \"button\", 16);\n      i0.ɵɵlistener(\"click\", function ClientComponent_Template_button_click_213_listener() {\n        return ctx.changePassword();\n      });\n      i0.ɵɵtext(214, \"Promeni lozinku\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(215, \"p\", 29);\n      i0.ɵɵtext(216);\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"src\", ctx.image, i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate2(\"\", ctx.firstname, \" \", ctx.lastname, \"\");\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(ctx.mail);\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate(ctx.contact);\n      i0.ɵɵadvance(20);\n      i0.ɵɵproperty(\"ngForOf\", ctx.allObjects);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngModel\", ctx.tipObj);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.adresaObj);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.prostorijeObj);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.kvadratura);\n      i0.ɵɵadvance(10);\n      i0.ɵɵproperty(\"ngModel\", ctx.rectWidth);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.rectHeight);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.drawingDoors);\n      i0.ɵɵadvance(19);\n      i0.ɵɵproperty(\"ngModel\", ctx.searchName);\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngModel\", ctx.searchAddress);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.sortParam);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngModel\", ctx.sortTrend);\n      i0.ɵɵadvance(19);\n      i0.ɵɵproperty(\"ngForOf\", ctx.allAgencies);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.adresaZahtev);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.allObjects);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.rokZahtev);\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.filterPosao);\n      i0.ɵɵadvance(28);\n      i0.ɵɵproperty(\"ngForOf\", ctx.sviPoslovi);\n      i0.ɵɵadvance(9);\n      i0.ɵɵproperty(\"ngModel\", ctx.oldPassword);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.newPassword);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.repeatPassword);\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(ctx.message);\n    }\n  },\n  dependencies: [i3.NgClass, i3.NgForOf, i3.NgIf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.CheckboxControlValueAccessor, i4.SelectControlValueAccessor, i4.RadioControlValueAccessor, i4.NgControlStatus, i4.NgModel],\n  styles: [\".thumbnail[_ngcontent-%COMP%] {\\r\\n    width: 70px;\\r\\n    height: 70px;\\r\\n}\\r\\n\\r\\n.canvasClass[_ngcontent-%COMP%] {\\r\\n    border: 1px solid black;\\r\\n    margin: 0;\\r\\n    padding: 0;\\r\\n}\\r\\n\\r\\n.green-row[_ngcontent-%COMP%] {\\r\\n    color: green;\\r\\n  }\\r\\n\\r\\n.red-row[_ngcontent-%COMP%] {\\r\\n    color: red;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNsaWVudC5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksV0FBVztJQUNYLFlBQVk7QUFDaEI7O0FBRUE7SUFDSSx1QkFBdUI7SUFDdkIsU0FBUztJQUNULFVBQVU7QUFDZDs7QUFFQTtJQUNJLFlBQVk7RUFDZDs7QUFFQTtJQUNFLFVBQVU7RUFDWiIsImZpbGUiOiJjbGllbnQuY29tcG9uZW50LmNzcyIsInNvdXJjZXNDb250ZW50IjpbIi50aHVtYm5haWwge1xyXG4gICAgd2lkdGg6IDcwcHg7XHJcbiAgICBoZWlnaHQ6IDcwcHg7XHJcbn1cclxuXHJcbi5jYW52YXNDbGFzcyB7XHJcbiAgICBib3JkZXI6IDFweCBzb2xpZCBibGFjaztcclxuICAgIG1hcmdpbjogMDtcclxuICAgIHBhZGRpbmc6IDA7XHJcbn1cclxuXHJcbi5ncmVlbi1yb3cge1xyXG4gICAgY29sb3I6IGdyZWVuO1xyXG4gIH1cclxuICBcclxuICAucmVkLXJvdyB7XHJcbiAgICBjb2xvcjogcmVkO1xyXG4gIH0iXX0= */\"]\n});","map":{"version":3,"mappings":"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","names":["ElementRef","Pravougaonik","i0","ClientComponent","constructor","userService","router","elementRef","ngOnInit","username","sessionStorage","getItem","password","findImage","canvas","document","querySelector","ctx","getContext","width","height","canvas2","nativeElement","ctx2","addEventListener","event","x","offsetX","y","offsetY","drawingDoors","novaVrata","preklapaSe","doors","some","door","intersects","push","draw_shapes","bind","noviKvadrat","rectWidth","rectHeight","kvadrati","kvadrat","is_mouse_in_shape","shape_left","shape_right","shape_top","shape_bottom","mouse_down","preventDefault","index","startX","parseInt","startY","current_shape_index","is_dragging","startDoorX","startDoorY","vrata","current_door_index","mouse_up","mouse_out","mouse_move","mouseX","mouseY","dx","dy","current_shape","current_door","onmousedown","onmouseup","onmouseout","onmousemove","clearRect","beginPath","rect","stroke","fillStyle","fillRect","getAllObjects","subscribe","data","allObjects","getAllAgencies","allAgencies","getAllUserJobs","sviPoslovi","findClient","client","image","firstname","lastname","contact","mail","console","log","addObject","kanvas","brSoba","length","brVrata","koordinateSoba","map","color","koordinateVrata","tipObj","adresaObj","prostorijeObj","kvadratura","resp","alert","onFileSelected","file","target","files","reader","FileReader","onload","e","contents","result","json","JSON","parse","tip","adresa","prostorije","readAsText","showCanvas","i","strokeRect","editCanvas","setItem","navigate","deleteCanvas","deleteObject","changePassword","isDisabled","message","isPasswordValid","oldPassword","newPassword","repeatPassword","firstCaracter","charAt","test","searchAgency","searchName","searchAddress","searchAgenciesName","searchAgenciesAddress","searchAgencies","sortirajAgencije","sort","ag1","ag2","valueA","getPropertyValue","sortParam","valueB","sortTrend","obj","prop","toLowerCase","podnesiZahtev","addZahtev","agencijaZahtev","adresaZahtev","rokZahtev","prihvatiPonudu","agencija","odbijPonudu","plati","isJobFinished","response","toPromise","filtrirajPoslove","filterPosao","filterJobs","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\David\\Desktop\\projekat_pia\\frontend\\src\\app\\client\\client.component.ts","C:\\Users\\David\\Desktop\\projekat_pia\\frontend\\src\\app\\client\\client.component.html"],"sourcesContent":["import { Component, ElementRef, OnInit } from '@angular/core';\nimport { UserService } from '../user.service';\nimport { Router } from '@angular/router';\nimport { Client } from '../model/client';\nimport { Pravougaonik } from '../model/rectaingle';\nimport { Objekat } from '../model/object';\nimport { Agency } from '../model/agency';\nimport { Zahtev } from '../model/zahtev';\n\n@Component({\n  selector: 'app-client',\n  templateUrl: './client.component.html',\n  styleUrls: ['./client.component.css']\n})\nexport class ClientComponent implements OnInit {\n\n  constructor(private userService: UserService, private router: Router, private elementRef: ElementRef) { }\n\n  ngOnInit(): void {\n    this.username = sessionStorage.getItem('username');\n    this.password = sessionStorage.getItem('password');\n    this.findImage();\n\n    this.canvas = document.querySelector('#canvas1');\n    this.ctx = this.canvas.getContext('2d');\n    this.canvas.width = 300;\n    this.canvas.height = 300;\n\n    this.canvas2 = this.elementRef.nativeElement.querySelector('#canvas2');\n    this.ctx2 = this.canvas2.getContext('2d');\n    this.canvas2.width = 300;\n    this.canvas2.height = 300;\n    \n    this.canvas.addEventListener(\"click\", (event) => {\n      let x = event.offsetX;\n      let y = event.offsetY;\n\n      if(this.drawingDoors){    // crtamo vrata\n        const novaVrata = new Pravougaonik(x, y, 20, 20);\n        const preklapaSe = this.doors.some((door) => door.intersects(novaVrata));\n        \n        if(!preklapaSe){\n          if(novaVrata.x + novaVrata.width < this.canvas.width && novaVrata.y + novaVrata.height < this.canvas.height) {\n            this.doors.push(novaVrata);\n            draw_shapes.bind(this)();\n          }\n        }\n      }\n      else {    // crtamo sobu\n        const noviKvadrat = new Pravougaonik(x, y, this.rectWidth, this.rectHeight);\n        \n        const preklapaSe = this.kvadrati.some((kvadrat) => kvadrat.intersects(noviKvadrat));  //ako se bar sa jednim preklapa, vratice true\n\n        if (!preklapaSe) {\n          if(noviKvadrat.x + noviKvadrat.width < this.canvas.width && noviKvadrat.y + noviKvadrat.height < this.canvas.height) {\n            this.kvadrati.push(noviKvadrat);\n            draw_shapes.bind(this)();\n          }        \n        }\n      }\n      \n        \n    })\n\n    \n    let is_mouse_in_shape = (x, y, kvadrat) => {\n      let shape_left = kvadrat.x;\n      let shape_right = kvadrat.x + kvadrat.width;\n      let shape_top = kvadrat.y;\n      let shape_bottom = kvadrat.y + kvadrat.height;\n\n      if(x > shape_left && x < shape_right && y > shape_top && y < shape_bottom) {\n        return true;\n      }\n\n      return false;\n    }\n\n    let mouse_down = (event) => {\n      event.preventDefault();\n      \n      //this.startX = parseInt(event.offsetX);\n      //this.startY = parseInt(event.offsetY);\n\n      let index=0;\n      \n      if(!this.drawingDoors) {    // pomeramo sobu\n        this.startX = parseInt(event.offsetX);\n        this.startY = parseInt(event.offsetY);\n\n        for(let kvadrat of this.kvadrati) {\n          if(is_mouse_in_shape(this.startX, this.startY, kvadrat)){\n            this.current_shape_index = index;\n            this.is_dragging = true;\n            return;\n          }\n          index++;\n        }\n      }\n      else {  // pomeramo vrata\n        this.startDoorX = parseInt(event.offsetX);\n        this.startDoorY = parseInt(event.offsetY);\n\n        for(let vrata of this.doors) {\n          if(is_mouse_in_shape(this.startDoorX, this.startDoorY, vrata)){\n            this.current_door_index = index;\n            this.is_dragging = true;\n            return;\n          }\n          index++;\n        }\n      }\n    }\n\n    let mouse_up = (event) => {\n      if(!this.is_dragging){\n        return;\n      }\n\n      event.preventDefault();\n      this.is_dragging = false;\n    }\n\n    let mouse_out = (event) => {\n      if(!this.is_dragging){\n        return;\n      }\n\n      event.preventDefault();\n      this.is_dragging = false;\n    }\n\n    let mouse_move = (event) => {\n      if(!this.is_dragging){\n        return;\n      } else {\n        event.preventDefault();\n        let mouseX = parseInt(event.offsetX);\n        let mouseY = parseInt(event.offsetY);\n        \n        let dx;\n        let dy;\n\n        let current_shape = this.kvadrati[this.current_shape_index];\n        let current_door = this.doors[this.current_door_index];\n\n        \n        if(!this.drawingDoors){\n          dx = mouseX - this.startX;\n          dy = mouseY - this.startY;\n\n          // Provera preklapanja sa drugim kvadratima\n          let preklapaSe = this.kvadrati.some((kvadrat, index) => {\n            if (index !== this.current_shape_index) {\n              return kvadrat.intersects(new Pravougaonik(\n                current_shape.x + dx,\n                current_shape.y + dy,\n                current_shape.width,\n                current_shape.height\n              ));\n            }\n            return false;\n          });\n\n          if(!preklapaSe){\n            if(current_shape.x + dx + current_shape.width < this.canvas.width && current_shape.x + dx > 0){\n              current_shape.x += dx;\n            }          \n            if(current_shape.y + dy + current_shape.height < this.canvas.height && current_shape.y + dy > 0){\n              current_shape.y += dy;\n            }\n          }        \n  \n          draw_shapes();\n  \n          this.startX = mouseX;\n          this.startY = mouseY;\n        }       \n        else {\n          dx = mouseX - this.startDoorX;\n          dy = mouseY - this.startDoorY;\n          \n          if(current_door.x + dx + current_door.width < this.canvas.width && current_door.x + dx > 0){\n            current_door.x += dx;\n          }          \n          if(current_door.y + dy + current_door.height < this.canvas.height && current_door.y + dy > 0){\n            current_door.y += dy;\n          }    \n  \n          draw_shapes();\n  \n          this.startDoorX = mouseX;\n          this.startDoorY = mouseY;\n        }\n        \n      }\n    }\n\n    this.canvas.onmousedown = mouse_down;\n    this.canvas.onmouseup = mouse_up;\n    this.canvas.onmouseout = mouse_out;\n    this.canvas.onmousemove = mouse_move;\n\n    let draw_shapes = function() {\n      this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n      for(let kvadrat of this.kvadrati){        \n        this.ctx.beginPath();\n        this.ctx.rect(kvadrat.x, kvadrat.y, kvadrat.width, kvadrat.height);\n        this.ctx.stroke();\n      }\n      for(let door of this.doors){\n        this.ctx.fillStyle = 'brown';\n        this.ctx.fillRect(door.x, door.y, door.width, door.height);\n      }\n    }.bind(this);\n    draw_shapes();\n\n    this.userService.getAllObjects(this.username).subscribe((data: Objekat[])=>{\n      this.allObjects = data;\n    })\n    this.userService.getAllAgencies().subscribe((data: Agency[])=>{\n      this.allAgencies = data;\n    })\n    this.userService.getAllUserJobs(this.username).subscribe((data: Zahtev[])=>{\n      this.sviPoslovi = data;\n    })\n  }\n\n  username: string;\n  password: string;\n  image: string;\n  message: string;\n  firstname: string;\n  lastname: string;\n  contact: string;\n  mail: string;\n\n  // canvas\n  canvas: HTMLCanvasElement;\n  ctx: CanvasRenderingContext2D;\n  kvadrati: Pravougaonik[] = [];\n  selectedRect: Pravougaonik = null;\n  offsetX: number;\n  offsetY: number;\n  current_shape_index: number = null;\n  is_dragging: boolean = false;\n  startX: number;\n  startY: number;\n\n  canvas2: HTMLCanvasElement;\n  ctx2: CanvasRenderingContext2D;\n\n  rectHeight: number;\n  rectWidth: number;\n  drawingDoors: boolean = false;   // da li crtamo vrata\n  doors: Pravougaonik[] = [];\n  selectedDoor: Pravougaonik = null;\n  current_door_index: number = null;\n  startDoorX: number;\n  startDoorY: number;\n\n  // Unose se sa forme za promenu lozinke:\n  oldPassword: string;\n  newPassword: string;\n  repeatPassword: string;\n\n  // Objekat\n  tipObj: string;\n  adresaObj: string;\n  prostorijeObj: number;\n  kvadratura: number;\n  allObjects: Objekat[] = [];\n  \n\n  findImage() {\n    this.userService.findClient(this.username, this.password).subscribe((client: Client)=>{\n      if(client){\n        this.image = client.image;\n        this.firstname = client.firstname;\n        this.lastname = client.lastname;\n        this.contact = client.contact;\n        this.mail = client.mail;\n      }\n      else {\n        console.log(\"neuspeh\");\n      }\n    });\n  }\n\n  // Dodavanje objekta\n  addObject() {\n\n    const kanvas = {\n      brSoba: this.kvadrati.length,\n      brVrata: this.doors.length,\n      koordinateSoba: this.kvadrati.map(kvadrat => ({\n        x: kvadrat.x,\n        y: kvadrat.y,\n        width: kvadrat.width,\n        height: kvadrat.height,\n        color: null\n      })),\n      koordinateVrata: this.doors.map(door => ({\n        x: door.x,\n        y: door.y,\n        width: door.width,\n        height: door.height\n      }))\n    };\n\n    this.userService.addObject(this.username, this.tipObj, this.adresaObj, this.prostorijeObj, this.kvadratura, kanvas).subscribe(resp => {\n      if (resp) {\n        alert(resp['message']);\n      } else {\n        alert(\"Objekat nije dodat.\");\n      }\n    });\n\n    this.ngOnInit();\n  }\n\n  // dodavanje objekta preko JSON fajla\n  onFileSelected(event: any) {\n    const file: File = event.target.files[0];\n    const reader = new FileReader();\n\n    reader.onload = (e: any) => {\n      const contents = e.target.result;\n      const json = JSON.parse(contents);\n      //console.log(json);\n\n      // Dodajemo JSON u bazu\n      this.userService.addObject(this.username, json.tip, json.adresa, json.prostorije, json.kvadratura, json.canvas).subscribe(resp=>{    //subscribe - cekam odgovor u userFromDB\n        if(resp){\n          alert(resp['message']);\n        }\n        else {\n          alert(\"Objekat nije dodat.\");\n        }\n      })\n      \n    };\n\n    reader.readAsText(file);\n    this.ngOnInit();\n  }\n\n  // za prikazivanje na canvasu 2\n  showCanvas(canvas: any) {\n    this.ctx2.clearRect(0, 0, this.canvas2.width, this.canvas2.height);\n\n    for(let i=0; i < canvas.brSoba; i++){\n      if(canvas.koordinateSoba[i].color == \"red\"){\n        this.ctx2.fillStyle = 'red';\n        this.ctx2.fillRect(canvas.koordinateSoba[i].x, canvas.koordinateSoba[i].y, canvas.koordinateSoba[i].width, canvas.koordinateSoba[i].height);\n        this.ctx2.strokeRect(canvas.koordinateSoba[i].x, canvas.koordinateSoba[i].y, canvas.koordinateSoba[i].width, canvas.koordinateSoba[i].height);\n      } else if(canvas.koordinateSoba[i].color == \"green\") {\n        this.ctx2.fillStyle = 'green';\n        this.ctx2.fillRect(canvas.koordinateSoba[i].x, canvas.koordinateSoba[i].y, canvas.koordinateSoba[i].width, canvas.koordinateSoba[i].height);\n        this.ctx2.strokeRect(canvas.koordinateSoba[i].x, canvas.koordinateSoba[i].y, canvas.koordinateSoba[i].width, canvas.koordinateSoba[i].height);\n      } \n      else {\n        this.ctx2.beginPath();\n        this.ctx2.rect(canvas.koordinateSoba[i].x, canvas.koordinateSoba[i].y, canvas.koordinateSoba[i].width, canvas.koordinateSoba[i].height);\n        this.ctx2.stroke();\n      }\n    }\n    for(let i=0; i < canvas.brVrata; i++){\n      this.ctx2.fillStyle = 'brown';\n      this.ctx2.fillRect(canvas.koordinateVrata[i].x, canvas.koordinateVrata[i].y, canvas.koordinateVrata[i].width, canvas.koordinateVrata[i].height);\n    }\n  }\n\n  editCanvas(adresa: string) {\n    sessionStorage.setItem(\"userObj\", this.username);\n    sessionStorage.setItem(\"adresaObj\", adresa);\n\n    this.router.navigate(['edit-obj']);\n  }\n\n  deleteCanvas(tip: string, adresa: string) {\n    this.userService.deleteObject(tip, adresa).subscribe(resp=>{    //subscribe - cekam odgovor u userFromDB\n      if(resp){\n      }\n      else {\n        alert(\"Objekat nije obrisan.\");\n      }\n    }) \n\n    this.ngOnInit();\n  }\n\n  // Promena lozinke\n  changePassword() {\n    if(this.isDisabled() == true) {\n      this.message = \"Morate uneti sva polja.\"\n      return;\n    }\n    if(this.isPasswordValid() == false) return;    \n\n    if(this.oldPassword != this.password) {\n      this.message = \"Stara lozinka nije ispravna.\";\n      return;\n    }\n\n    if(this.newPassword != this.repeatPassword) {\n      this.message = \"Ponovljena lozinka mora biti ista kao nova.\";\n      return;\n    }\n\n    this.userService.changePassword(this.username, this.newPassword).subscribe(resp=>{    //subscribe - cekam odgovor u userFromDB\n      if(resp){\n        alert(resp['message']);\n      }\n      else {\n        this.message = \"Promena lozinke neuspesna.\"\n      }\n    })\n\n  }\n\n  isDisabled(): boolean {     // ako nisu uneta sva polja -> disabled\n    if(this.oldPassword && this.newPassword && this.repeatPassword) return false;\n      else return true;\n  }\n\n  isPasswordValid(): boolean {   //pomocna funkcija koja proverava ispravnost lozinke\n    if(this.newPassword.length<7 || this.newPassword.length>12) {\n      this.message = \"Lozinka mora da sadrzi najmanje 7, a najvise 12 karaktera.\"\n      return false;\n    }\n\n    const firstCaracter = this.newPassword.charAt(0);\n    if(!/[a-zA-Z]/.test(firstCaracter)) {\n      this.message = \"Prvi karakter lozinke mora biti slovo.\"\n      return false;\n    }\n\n    if(!/[A-Z]/.test(this.newPassword) || !/[0-9]/.test(this.newPassword) || !/[^a-zA-Z0-9]/.test(this.newPassword)) {\n      this.message = \"Lozinka mora sadrzati bar jedno veliko slovo, jedan broj i jedan specijalni karakter.\"\n      return false;\n    }\n\n    return true;  //proslo je sve uslove\n  }\n\n  // Agencije : pretrazivanje i prikazivanje\n  allAgencies: Agency[] = [];\n  searchName: String;\n  searchAddress: String;\n  \n  sortParam: string;       // po cemu sortiramo: naziv / opis\n  sortTrend: number;   // kriterijum: asc / desc\n\n  adresaZahtev: string;\n  rokZahtev: string;\n  agencijaZahtev: string;\n\n  searchAgency() {\n    if(this.searchName && !this.searchAddress) {\n      this.userService.searchAgenciesName(this.searchName).subscribe((data: Agency[])=>{\n        this.allAgencies = data;\n      })\n    }\n    else if(!this.searchName && this.searchAddress) {\n      this.userService.searchAgenciesAddress(this.searchAddress).subscribe((data: Agency[])=>{\n        this.allAgencies = data;\n      })\n    } \n    else if(this.searchName && this.searchAddress) {\n      this.userService.searchAgencies(this.searchName, this.searchAddress).subscribe((data: Agency[])=>{\n        this.allAgencies = data;\n      })\n    } \n    else {\n      this.ngOnInit();\n    }\n    \n  }\n\n  sortirajAgencije() {\n    this.allAgencies.sort((ag1, ag2) => {\n      const valueA = this.getPropertyValue(ag1, this.sortParam);\n      const valueB = this.getPropertyValue(ag2, this.sortParam);\n    \n      if (valueA < valueB) {\n        return -1 * this.sortTrend; // Promenjeno u negativan broj za opadajući redosled\n      } else if (valueA > valueB) {\n        return 1 * this.sortTrend;\n      } else {\n        return 0;\n      }\n    });\n  }\n  getPropertyValue(obj: Agency, prop: string): any {\n    return obj[prop.toLowerCase()];\n  }\n\n\n  // POSLOVI\n  sviPoslovi: Zahtev[] = [];\n  filterPosao: string;\n\n\n  podnesiZahtev() {\n    this.userService.addZahtev(this.username, this.agencijaZahtev, this.adresaZahtev, this.rokZahtev, \"neobradjenZahtev\").subscribe(resp => {\n      if (resp) {\n        alert(resp['message']);\n      } else {\n        alert(\"Zahtev nije dodat.\");\n      }\n    });\n\n    this.ngOnInit();\n  }\n\n  prihvatiPonudu(agencija: string, adresa: string) {\n    this.userService.prihvatiPonudu(this.username, agencija, adresa).subscribe(resp=>{\n      if(resp){\n      }\n      else {\n        this.message = \"Neuspeh!\"\n      }\n    })\n\n    this.ngOnInit();\n  }\n\n  odbijPonudu(agencija: string, adresa: string) {\n    this.userService.odbijPonudu(this.username, agencija, adresa).subscribe(resp=>{\n      if(resp){\n      }\n      else {\n        this.message = \"Neuspeh!\"\n      }\n    })\n\n    this.ngOnInit();\n  }\n\n  plati(agencija: string, adresa: string) {\n    console.log(\"plati\");\n    this.userService.plati(this.username, agencija, adresa).subscribe(resp=>{\n      if(resp){\n      }\n      else {\n        this.message = \"Neuspeh!\"\n      }\n    })\n\n    this.ngOnInit();\n  }\n\n  async isJobFinished(adresa: string) : Promise<boolean>{\n    const response = await this.userService.isJobFinished(this.username, adresa).toPromise();\n    if (response['message'] === 'Gotovo') {\n      console.log('gotovo');\n      return true;\n    } else if (response['message'] === 'NijeGotovo') {\n      return false;\n    } else {\n      console.log('Nije doslo dovde');\n      return false;\n    }\n  }\n\n  filtrirajPoslove() {\n    if(this.filterPosao == \"aktivan\" || this.filterPosao == \"zavrsen\" || this.filterPosao == \"zahtev\"){\n      this.userService.filterJobs(this.username, this.filterPosao).subscribe((data: Zahtev[])=>{\n        this.sviPoslovi = data;\n        console.log(this.sviPoslovi);\n      })\n    }\n    else if(this.filterPosao == \"svi\"){\n      this.userService.getAllUserJobs(this.username).subscribe((data: Zahtev[])=>{\n        this.sviPoslovi = data;\n      })\n    } \n    else {\n      alert(\"GRESKA filter\");\n    }\n  }\n\n}\n","<h3>Profil</h3>\n<table>\n    <tr>\n        <td>\n            <img [src]=\"image\" alt=\"Uploaded Image\" class=\"thumbnail\">\n        </td>\n        <td>\n            <h4>{{firstname}} {{lastname}}</h4>\n        </td>\n    </tr>\n    <tr>\n        <td>mail: </td>\n        <td>{{mail}}</td>\n    </tr>\n    <tr>\n        <td>contact: </td>\n        <td>{{contact}}</td>\n    </tr>\n</table>\n<hr/>\n\n<h3>Svi objekti</h3>\n<table border=\"1\">\n    <tr>\n        <td>Tip</td>\n        <td>Adresa</td>\n        <td>Br. prostorija</td>\n        <td>Kvadratura</td>\n        <td>Skica</td>\n        <td>Izmeni</td>\n        <td>Obrisi</td>\n    </tr>\n    <tr *ngFor=\"let obj of allObjects\">\n        <td>{{obj.tip}}</td>\n        <td>{{obj.adresa}}</td>\n        <td>{{obj.prostorije}}</td>\n        <td>{{obj.kvadratura}}</td>\n        <td>\n            <button (click)=\"showCanvas(obj.canvas)\">Prikazi</button>\n        </td>\n        <td>\n            <button (click)=\"editCanvas(obj.adresa)\">Izmeni objekat</button>\n        </td>\n        <td>\n            <button (click)=\"deleteCanvas(obj.tip, obj.adresa)\">Obrisi</button>\n        </td>\n    </tr>\n</table>\n<br/>\n<canvas id=\"canvas2\" class=\"canvasClass\"></canvas>\n\n<h4>Dodaj objekat:</h4>\n<table>\n    <tr>\n        <td>Tip objekta</td>\n        <td>\n            <select [(ngModel)]=\"tipObj\">\n                <option value=\"stan\">Stan</option>\n                <option value=\"kuca\">Kuca</option>\n            </select>\n        </td>\n    </tr>\n    <tr>\n        <td>Adresa</td>\n        <td>\n            <input type=\"text\" name=\"text\" [(ngModel)]=\"adresaObj\">\n        </td>\n    </tr>\n    <tr>\n        <td>Broj prostorija</td>\n        <td>\n            <input type=\"number\" name=\"numer\" [(ngModel)]=\"prostorijeObj\">\n        </td>\n    </tr>\n    <tr>\n        <td>Kvadratura</td>\n        <td>\n            <input type=\"number\" name=\"number\" [(ngModel)]=\"kvadratura\">\n        </td>\n    </tr>\n</table>\n\n<p style=\"margin-bottom: 0;\">Unesite dimenzije prostorije koju zelite da nacrtate, a zatim klikom na povrsinu ispod pozicionirajte istu.</p>\n<p style=\"font-style: italic; color: red; margin-top: 0;\">(Napomena: Velicina platna je 300x300)</p>\n<table>\n    <tr>\n        <td>Sirina: </td>\n        <td>\n            <input type=\"number\" name=\"number\" [(ngModel)]=\"rectWidth\">\n        </td>\n        <td>Visina: </td>\n        <td>\n            <input type=\"number\" name=\"number\" [(ngModel)]=\"rectHeight\">\n        </td>\n    </tr>\n    <tr>\n        <td colspan=\"4\">\n            <input type=\"checkbox\" name=\"checkbox\" id=\"door\" [(ngModel)]=\"drawingDoors\">\n            <label for=\"door\">Crtaj vrata</label>\n        </td>\n    </tr>\n</table>\n<canvas id=\"canvas1\" class=\"canvasClass\"></canvas>\n<br/>\n<button (click)=\"addObject()\">Dodaj objekat</button>\n<p>Dodajte objekat preko JSON fajla:</p>\n<input type=\"file\" (change)=\"onFileSelected($event)\" accept=\".json\">\n<hr/>\n<!-- ================================================================================================= -->\n<h3>Agencije</h3> \nPretrazi agencije: \n<table>\n    <tr>\n        <td>Naziv: </td>\n        <td>\n            <input type=\"text\" name=\"text\" [(ngModel)]=\"searchName\">\n        </td>\n        <td>Adresa: </td>\n        <td>\n            <input type=\"text\" name=\"text\" [(ngModel)]=\"searchAddress\">\n        </td>\n        <td>\n            <button (click)=\"searchAgency()\">Pretrazi</button>\n        </td>\n    </tr>    \n</table>\n\n<table>\n    <tr>\n        <td>Sortiraj po: </td>\n        <td>\n            <select [(ngModel)]=\"sortParam\">\n                <option value=\"name\">Nazivu</option>\n                <option value=\"description\">Opisu</option>\n            </select>\n        </td>\n        <td>\n            <select [(ngModel)]=\"sortTrend\">\n                <option value=1>Rastuce</option>\n                <option value=-1>Opadajuce</option>\n            </select>\n        </td>\n        <td>\n            <button (click)=\"sortirajAgencije()\">Sortiraj</button>\n        </td>\n    </tr>    \n</table>\n\n<br/>\n<table border=\"1\">\n    <tr>\n        <td>Logo</td>\n        <td>Naziv</td>\n        <td>Opis</td>\n        <td>Izaberi</td>\n    </tr>\n    <tr *ngFor=\"let n of allAgencies\">\n        <td>\n            <img [src]=\"n.image\" alt=\"Uploaded Image\" class=\"thumbnail\"> \n        </td>\n        <td>{{n.name}}</td>\n        <td>{{n.description}}</td>\n        <td >\n            <input type=\"radio\" name=\"radiogroup\" value=\"{{n.name}}\" [(ngModel)]=\"agencijaZahtev\">\n        </td>\n    </tr>\n</table>\n\n<h4>Popuni zahtev za saradnju sa agencijom:</h4>\n<table>\n    <tr>\n        <td>Objekat na adresi</td>\n        <td>\n            <select [(ngModel)]=\"adresaZahtev\">\n                <option *ngFor=\"let obj of allObjects\" value=\"{{obj.adresa}}\">{{obj.adresa}}</option>\n            </select>\n        </td>\n    </tr>\n    <tr>\n        <td>Rok zavrsetka radova: </td>\n        <td>\n            <input type=\"text\" name=\"text\" [(ngModel)]=\"rokZahtev\">\n        </td>\n    </tr>\n    <tr>\n        <button (click)=\"podnesiZahtev()\">Podnesi zahtev</button>\n    </tr>\n</table>\n\n<!-- =========================================== POSLOVI ================================================ -->\n<hr/>\n<h3>Poslovi</h3>\n\nFiltriraj: \n<select [(ngModel)]=\"filterPosao\">\n    <option value=\"aktivan\">Aktivne poslove</option>\n    <option value=\"zavrsen\">Zavrsene poslove</option>\n    <option value=\"zahtev\">Zahteve</option>\n    <option value=\"svi\">Ponisti filter</option>\n</select>\n<button (click)=\"filtrirajPoslove()\">Potvrdi</button>\n<br/>\n<table border=\"1\">\n    <tr>\n        <td>Agencija</td>\n        <td>Adresa</td>\n        <td>Rok</td>\n        <td>Ponuda</td>\n        <td>Prihvati</td>\n        <td>Odbij</td>\n        <td>Plati</td>\n    </tr>\n    <tr *ngFor=\"let n of sviPoslovi\" [ngClass]=\"{'green-row': n.status === 'prihvacenZahtev', 'red-row': n.status === 'odbijenZahtev'}\">\n        <td>{{n.agencija}}</td>\n        <td>{{n.adresa}}</td>\n        <td>{{n.rok}}</td>\n        <td *ngIf=\"n.ponuda > 0 && n.status == 'prihvacenZahtev'\">{{n.ponuda}}</td>\n        <td *ngIf=\"n.ponuda > 0 && n.status == 'prihvacenZahtev'\">\n            <button (click)=\"prihvatiPonudu(n.agencija, n.adresa)\">Prihvati</button>\n        </td>\n        <td *ngIf=\"n.ponuda > 0 && n.status == 'prihvacenZahtev'\">\n            <button (click)=\"odbijPonudu(n.agencija, n.adresa)\">Odbij</button>\n        </td>\n        <td *ngIf=\"n.ponuda > 0 && n.status == 'aktivan' && isJobFinished(n.adresa)\">\n            <button (click)=\"plati(n.agencija, n.adresa)\">Plati</button>\n        </td>\n    </tr>\n</table>\n\n<!-- ================================================================================================= -->\n<hr/>\n<h3>Promena lozinke</h3>\n<table>\n    <tr>\n        <td>Stara lozinka</td>\n        <td>\n            <input type=\"text\" name=\"text\" [(ngModel)]=\"oldPassword\">\n        </td>\n    </tr>\n    <tr>\n        <td>Nova lozinka</td>\n        <td>\n            <input type=\"text\" name=\"text\" [(ngModel)]=\"newPassword\">\n        </td>\n    </tr>\n    <tr>\n        <td>Ponovite lozinku</td>\n        <td>\n            <input type=\"text\" name=\"text\" [(ngModel)]=\"repeatPassword\">\n        </td>\n    </tr>\n    <tr>\n        <td colspan=\"2\">\n            <button (click)=\"changePassword()\">Promeni lozinku</button>\n        </td>\n    </tr>\n</table>\n<p style=\"color: red\">{{message}}</p>"]},"metadata":{},"sourceType":"module"}